
/**
 * @file basic-data-mock.ts
 * @desc 基础数据模块模拟数据 - 食用油加工设备
 */
import {
  CategoryNode,
  MasterDataRecord,
  DataStandard,
  SyncLog,
  DataQualityReport,
  EquipmentCategoryType,
  MasterDataStatus,
  DataSourceSystem,
  DataStandardType,
  StandardStatus,
  categoryTypeMap,
  masterDataStatusMap,
  dataSourceSystemMap,
} from '@/lib/basic-data-types'

const now = new Date().toISOString()

/**
 * 食用油加工设备分类树
 * 按工艺流程、功能、规格三个维度组织
 */
export const mockCategoryTree: CategoryNode[] = [
  {
    id: 'CAT001',
    key: 'process-root',
    title: '按工艺分类',
    type: 'process',
    code: 'PROC',
    level: 0,
    parentId: null,
    description: '按照食用油生产工艺流程对设备进行分类',
    equipmentCount: 45,
    active: true,
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
    children: [
      {
        id: 'CAT001-01',
        key: 'process-1',
        title: '预处理工段',
        type: 'process',
        code: 'PROC-01',
        level: 1,
        parentId: 'CAT001',
        description: '油料清理、破碎、软化等预处理设备',
        equipmentCount: 12,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
        children: [
          {
            id: 'CAT001-01-01',
            key: 'process-1-1',
            title: '清理设备',
            type: 'process',
            code: 'PROC-01-01',
            level: 2,
            parentId: 'CAT001-01',
            description: '振动筛、去石机、磁选机等',
            equipmentCount: 4,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-01-02',
            key: 'process-1-2',
            title: '破碎设备',
            type: 'process',
            code: 'PROC-01-02',
            level: 2,
            parentId: 'CAT001-01',
            description: '破碎机、轧胚机等',
            equipmentCount: 4,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-01-03',
            key: 'process-1-3',
            title: '软化设备',
            type: 'process',
            code: 'PROC-01-03',
            level: 2,
            parentId: 'CAT001-01',
            description: '软化锅、蒸炒锅等',
            equipmentCount: 4,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
        ],
      },
      {
        id: 'CAT001-02',
        key: 'process-2',
        title: '压榨工段',
        type: 'process',
        code: 'PROC-02',
        level: 1,
        parentId: 'CAT001',
        description: '机械压榨取油设备',
        equipmentCount: 15,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
        children: [
          {
            id: 'CAT001-02-01',
            key: 'process-2-1',
            title: '螺旋榨油机',
            type: 'process',
            code: 'PROC-02-01',
            level: 2,
            parentId: 'CAT001-02',
            description: '连续螺旋压榨设备',
            equipmentCount: 8,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-02-02',
            key: 'process-2-2',
            title: '液压榨油机',
            type: 'process',
            code: 'PROC-02-02',
            level: 2,
            parentId: 'CAT001-02',
            description: '间歇式液压压榨设备',
            equipmentCount: 7,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
        ],
      },
      {
        id: 'CAT001-03',
        key: 'process-3',
        title: '浸出工段',
        type: 'process',
        code: 'PROC-03',
        level: 1,
        parentId: 'CAT001',
        description: '溶剂浸出取油设备',
        equipmentCount: 10,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
        children: [
          {
            id: 'CAT001-03-01',
            key: 'process-3-1',
            title: '浸出器',
            type: 'process',
            code: 'PROC-03-01',
            level: 2,
            parentId: 'CAT001-03',
            description: '平转浸出器、环形浸出器等',
            equipmentCount: 5,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-03-02',
            key: 'process-3-2',
            title: '蒸发设备',
            type: 'process',
            code: 'PROC-03-02',
            level: 2,
            parentId: 'CAT001-03',
            description: '第一蒸发器、第二蒸发器等',
            equipmentCount: 5,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
        ],
      },
      {
        id: 'CAT001-04',
        key: 'process-4',
        title: '精炼工段',
        type: 'process',
        code: 'PROC-04',
        level: 1,
        parentId: 'CAT001',
        description: '油脂精炼设备',
        equipmentCount: 18,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
        children: [
          {
            id: 'CAT001-04-01',
            key: 'process-4-1',
            title: '脱胶设备',
            type: 'process',
            code: 'PROC-04-01',
            level: 2,
            parentId: 'CAT001-04',
            description: '磷酸反应罐、水洗罐等',
            equipmentCount: 4,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-04-02',
            key: 'process-4-2',
            title: '脱色设备',
            type: 'process',
            code: 'PROC-04-02',
            level: 2,
            parentId: 'CAT001-04',
            description: '脱色塔、混合罐等',
            equipmentCount: 5,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-04-03',
            key: 'process-4-3',
            title: '脱臭设备',
            type: 'process',
            code: 'PROC-04-03',
            level: 2,
            parentId: 'CAT001-04',
            description: '脱臭塔、脂肪酸捕集器等',
            equipmentCount: 5,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
          {
            id: 'CAT001-04-04',
            key: 'process-4-4',
            title: '脱蜡设备',
            type: 'process',
            code: 'PROC-04-04',
            level: 2,
            parentId: 'CAT001-04',
            description: '结晶罐、冬化分离机等',
            equipmentCount: 4,
            active: true,
            createdAt: '2024-01-01T00:00:00.000Z',
            updatedAt: now,
          },
        ],
      },
    ],
  },
  {
    id: 'CAT002',
    key: 'function-root',
    title: '按功能分类',
    type: 'function',
    code: 'FUNC',
    level: 0,
    parentId: null,
    description: '按照设备功能对食用油加工设备进行分类',
    equipmentCount: 38,
    active: true,
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
    children: [
      {
        id: 'CAT002-01',
        key: 'function-1',
        title: '核心生产设备',
        type: 'function',
        code: 'FUNC-01',
        level: 1,
        parentId: 'CAT002',
        description: '直接用于油料处理和油脂提取的关键设备',
        equipmentCount: 20,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
      {
        id: 'CAT002-02',
        key: 'function-2',
        title: '辅助生产设备',
        type: 'function',
        code: 'FUNC-02',
        level: 1,
        parentId: 'CAT002',
        description: '输送、加热、冷却等辅助设备',
        equipmentCount: 12,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
      {
        id: 'CAT002-03',
        key: 'function-3',
        title: '检测控制设备',
        type: 'function',
        code: 'FUNC-03',
        level: 1,
        parentId: 'CAT002',
        description: '质量检测与过程控制设备',
        equipmentCount: 6,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
    ],
  },
  {
    id: 'CAT003',
    key: 'spec-root',
    title: '按规格分类',
    type: 'specification',
    code: 'SPEC',
    level: 0,
    parentId: null,
    description: '按照设备规格参数进行分类',
    equipmentCount: 52,
    active: true,
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
    children: [
      {
        id: 'CAT003-01',
        key: 'spec-1',
        title: '大型设备',
        type: 'specification',
        code: 'SPEC-01',
        level: 1,
        parentId: 'CAT003',
        description: '日处理能力≥200吨的设备',
        equipmentCount: 15,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
      {
        id: 'CAT003-02',
        key: 'spec-2',
        title: '中型设备',
        type: 'specification',
        code: 'SPEC-02',
        level: 1,
        parentId: 'CAT003',
        description: '日处理能力50-200吨的设备',
        equipmentCount: 25,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
      {
        id: 'CAT003-03',
        key: 'spec-3',
        title: '小型设备',
        type: 'specification',
        code: 'SPEC-03',
        level: 1,
        parentId: 'CAT003',
        description: '日处理能力<50吨的设备',
        equipmentCount: 12,
        active: true,
        createdAt: '2024-01-01T00:00:00.000Z',
        updatedAt: now,
      },
    ],
  },
]

/**
 * 生成食用油加工设备主数据记录
 */
export const mockMasterDataRecords: MasterDataRecord[] = Array.from({ length: 30 }, (_, i) => {
  const sources: DataSourceSystem[] = ['SAP', 'MES', 'ERP', 'manual']
  const statuses: MasterDataStatus[] = ['active', 'synced', 'pending_sync', 'sync_failed', 'inactive']
  const source = sources[i % sources.length]
  const status = statuses[i % statuses.length]
  const equipmentTypes = ['螺旋榨油机', '液压榨油机', '平转浸出器', '脱色塔', '脱臭塔', '结晶罐', '冬化分离机', '过滤机', '离心机', '导热油炉']
  const manufacturers = ['无锡宝鼎机械', '郑州远洋机械设备', '广州星戈机械制造', '山东国标机械', '江苏精诚粮油机械', '河南粮油机械厂', '中粮工程装备', '迈安德集团']

  return {
    id: `MD${String(i + 1).padStart(4, '0')}`,
    equipmentCode: `EQ-${String(i + 1).padStart(4, '0')}`,
    equipmentName: `${equipmentTypes[i % equipmentTypes.length]}-${i + 1}号`,
    category: equipmentTypes[i % equipmentTypes.length],
    specification: `YZ-${String((i % 3) + 1).padStart(2, '0')}-${Math.floor(Math.random() * 200 + 50)}T`,
    manufacturer: manufacturers[i % manufacturers.length],
    technicalParams: {
      power: `${(15 + Math.random() * 185).toFixed(1)}kW`,
      weight: `${(2 + Math.random() * 28).toFixed(1)}t`,
      voltage: '380V',
      frequency: '50Hz',
    },
    sourceSystem: source,
    sourceId: `${source.toUpperCase()}-${String(i + 1).padStart(6, '0')}`,
    syncStatus: status,
    lastSyncTime: status === 'synced' || status === 'active' ? new Date(Date.now() - Math.random() * 86400000 * 7).toISOString() : null,
    dataQuality: Math.floor(75 + Math.random() * 25),
    validationErrors: status === 'sync_failed' ? ['编码格式不符合规范', '缺少必填字段:制造商'] : [],
    customFields: status === 'active' ? {
      warrantyExpiry: new Date(Date.now() + 86400000 * 365).toISOString().split('T')[0],
      maintenanceCycle: '30',
    } : {},
    createdAt: new Date(Date.now() - 86400000 * (30 + Math.random() * 60)).toISOString(),
    updatedAt: new Date(Date.now() - 86400000 * Math.random() * 7).toISOString(),
  }
})

/**
 * 数据标准
 */
export const mockDataStandards: DataStandard[] = [
  {
    id: 'STD001',
    standardCode: 'EQ-CODE-001',
    standardName: '食用油加工设备编码规则',
    type: 'code',
    category: '基础数据',
    version: 'v2.0',
    status: 'published',
    description: '定义食用油加工设备编码的生成规则和格式要求',
    rules: [
      {
        fieldName: 'equipmentCode',
        dataType: 'string',
        required: true,
        pattern: '^EQ-[0-9]{4}$',
        minLength: 7,
        maxLength: 7,
        defaultValue: 'EQ-0001',
      },
    ],
    applicableTo: ['设备台账', '主数据管理', '维修管理'],
    createdBy: '系统管理员',
    approvedBy: '数据治理委员会',
    effectiveDate: '2024-01-01',
    expiryDate: '2026-12-31',
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
  },
  {
    id: 'STD002',
    standardCode: 'EQ-ATTR-001',
    standardName: '设备属性标准',
    type: 'attribute',
    category: '基础数据',
    version: 'v1.5',
    status: 'published',
    description: '定义食用油加工设备基础属性的填写规范',
    rules: [
      {
        fieldName: 'manufacturer',
        dataType: 'string',
        required: true,
        enumValues: ['无锡宝鼎机械', '郑州远洋机械设备', '广州星戈机械制造', '山东国标机械', '江苏精诚粮油机械', '河南粮油机械厂', '中粮工程装备', '迈安德集团', '江苏牧羊集团', '山东凯斯达机械'],
      },
      {
        fieldName: 'originalValue',
        dataType: 'number',
        required: true,
        minValue: 0,
        defaultValue: 0,
      },
      {
        fieldName: 'purchaseDate',
        dataType: 'date',
        required: true,
      },
    ],
    applicableTo: ['设备台账', '资产管理'],
    createdBy: '数据管理员',
    approvedBy: '设备部经理',
    effectiveDate: '2024-01-01',
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
  },
  {
    id: 'STD003',
    standardCode: 'EQ-VAL-001',
    standardName: '数据验证规则',
    type: 'validation',
    category: '数据质量',
    version: 'v1.0',
    status: 'published',
    description: '定义食用油加工设备数据验证和质量检查规则',
    rules: [
      {
        fieldName: 'equipmentCode',
        dataType: 'string',
        required: true,
        pattern: '^[A-Z]{2}-[0-9]{4}$',
      },
      {
        fieldName: 'model',
        dataType: 'string',
        required: true,
        minLength: 2,
        maxLength: 50,
      },
      {
        fieldName: 'responsiblePerson',
        dataType: 'string',
        required: true,
      },
    ],
    applicableTo: ['主数据管理', '数据集成'],
    createdBy: '数据质量专员',
    approvedBy: '数据治理委员会',
    effectiveDate: '2024-01-01',
    createdAt: '2024-01-01T00:00:00.000Z',
    updatedAt: now,
  },
]

/**
 * 同步日志
 */
export const mockSyncLogs: SyncLog[] = Array.from({ length: 10 }, (_, i) => {
  const sources: DataSourceSystem[] = ['SAP', 'MES', 'ERP', 'PLM']
  const statuses: SyncLog['status'][] = ['success', 'success', 'success', 'failed', 'partial']
  const source = sources[i % sources.length]
  const status = statuses[i % statuses.length]
  const startTime = new Date(Date.now() - 86400000 * i * 2)

  return {
    id: `SYNC${String(i + 1).padStart(4, '0')}`,
    sourceSystem: source,
    syncType: i % 3 === 0 ? 'full' : 'incremental',
    startTime: startTime.toISOString(),
    endTime: new Date(startTime.getTime() + 60000 * (5 + Math.random() * 20)).toISOString(),
    status,
    totalRecords: 100 + Math.floor(Math.random() * 900),
    successRecords: status === 'failed' ? 0 : Math.floor(80 + Math.random() * 20) * 10,
    failedRecords: status === 'success' ? 0 : Math.floor(Math.random() * 20) * 10,
    errors: status === 'failed' || status === 'partial' ? [
      '连接超时: SAP系统响应缓慢',
      '数据格式错误: 字段长度超限',
      '必填字段缺失: 设备型号为空',
    ].slice(0, Math.floor(Math.random() * 3) + 1) : [],
    triggeredBy: i % 2 === 0 ? '系统自动' : `管理员-${String((i % 5) + 1)}`,
    createdAt: startTime.toISOString(),
  }
})

/**
 * 数据质量报告
 */
export const mockDataQualityReports: DataQualityReport[] = Array.from({ length: 5 }, (_, i) => {
  const reportDate = new Date(Date.now() - 86400000 * i * 7)

  const issueTypes: DataQualityReport['issues'][0]['type'][] = ['missing', 'invalid', 'duplicate', 'inconsistent']

  return {
    id: `DQR${String(i + 1).padStart(4, '0')}`,
    reportDate: reportDate.toISOString().split('T')[0],
    totalRecords: 100 + i * 10,
    validRecords: Math.floor((90 - i * 2) + Math.random() * 5),
    invalidRecords: Math.floor((10 + i * 2) - Math.random() * 5),
    completenessRate: parseFloat((95 - i * 1.5 - Math.random() * 2).toFixed(2)),
    accuracyRate: parseFloat((92 - i * 1 - Math.random() * 3).toFixed(2)),
    consistencyRate: parseFloat((88 - i * 2 - Math.random() * 2).toFixed(2)),
    issues: [
      {
        type: 'missing' as const,
        field: 'manufacturer',
        count: Math.floor(Math.random() * 5),
        examples: ['EQ-0012', 'EQ-0025', 'EQ-0038'],
      },
      {
        type: 'invalid' as const,
        field: 'equipmentCode',
        count: Math.floor(Math.random() * 3),
        examples: ['EQ-123', 'EQ-ABCD', 'EQ-12'],
      },
      {
        type: 'duplicate' as const,
        field: 'specification',
        count: Math.floor(Math.random() * 4),
        examples: ['YZ-01-23', 'YZ-02-45'],
      },
      {
        type: 'inconsistent' as const,
        field: 'originalValue',
        count: Math.floor(Math.random() * 6),
        examples: ['负数原值', '原值为空', '格式错误'],
      },
    ].slice(0, Math.floor(Math.random() * 3) + 1) as DataQualityReport['issues'],
    createdAt: reportDate.toISOString(),
  }
})
